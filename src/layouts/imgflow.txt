User uploads image on Instagram → Instagram stores it → 
Developer requests API → Instagram returns media_url →
Developer displays it on website/app


https://graph.facebook.com/v19.0/17841461297442020/media?fields=id,media_type,media_url,caption,thumbnail_url,timestamp&access_token=EAA52ryfN8d8BO2iymhRH5pqPhZBoqDTi7l3h9vsPnInVDa2IsnkuJlzHRphufZBPtsb0IBI2iDGRmdHcgL5hJNkPIE8kDROhyuIZBZCWxJbWJnNCqpZAQONjpIrnoNk6jnH1lgnMf28S6b3Dm08vtSvsmwOjDBz9MJfzawYCjiib6RGsjjvmE9WqsIaLc0iGwRQZDZD




{
    "instagram_business_account": {
        "id": "17841461297442020"
    },
    "id": "108252789040467"
}



import React, { useState, useEffect } from "react";
import "../styles/ImagesSlide.css";
import PopupModal from "./PopupModal";
import { useNavigate } from "react-router-dom";


export default function ImagesSlide() {
  const [media, setMedia] = useState([]);
  const [selectedMedia, setSelectedMedia] = useState(null);
  const navigate = useNavigate();


  useEffect(() => {
    async function loadMedia() {
      try {
        const res = await fetch(
          `https://graph.facebook.com/v19.0/17841461297442020/media?fields=id,media_type,media_url,caption,thumbnail_url,timestamp&access_token=EAA52ryfN8d8BO2iymhRH5pqPhZBoqDTi7l3h9vsPnInVDa2IsnkuJlzHRphufZBPtsb0IBI2iDGRmdHcgL5hJNkPIE8kDROhyuIZBZCWxJbWJnNCqpZAQONjpIrnoNk6jnH1lgnMf28S6b3Dm08vtSvsmwOjDBz9MJfzawYCjiib6RGsjjvmE9WqsIaLc0iGwRQZDZD`
        );
        const data = await res.json();
        const updated = [];

        for (const item of data.data) {
          // fetch carousel children
          if (item.media_type === "CAROUSEL_ALBUM") {
            const childRes = await fetch(
              `https://graph.facebook.com/v19.0/${item.id}/children?fields=id,media_type,media_url&access_token=EAA52ryfN8d8BO2iymhRH5pqPhZBoqDTi7l3h9vsPnInVDa2IsnkuJlzHRphufZBPtsb0IBI2iDGRmdHcgL5hJNkPIE8kDROhyuIZBZCWxJbWJnNCqpZAQONjpIrnoNk6jnH1lgnMf28S6b3Dm08vtSvsmwOjDBz9MJfzawYCjiib6RGsjjvmE9WqsIaLc0iGwRQZDZD`
            );
            const childData = await childRes.json();
            item.children = childData.data; // store carousel children
          }
          updated.push(item);
        }

        setMedia(updated);
      } catch (err) {
        console.log(err);
      }
    }

    loadMedia();
  }, []);

  return (
    <>
      <div className="imageslide-wrapper">
        <div className="imageslide">
          <div className="section-title">
            <p className="section-title-p font-bold">MORE PROMPT LIBRARIES</p>
          </div>

          <div className="scroll-container">
            <div className={`scroll-content ${selectedMedia ? "stop-scroll" : ""}`}>
              {media.map((item, i) => (
                <div key={i} onClick={() => setSelectedMedia(item)}>

                  {/* IMAGE + CAROUSEL (FIRST IMAGE) */}
                  {(item.media_type === "IMAGE" || item.media_type === "CAROUSEL_ALBUM") && (
                    <img
                      src={item.children?.[0]?.media_url || item.media_url} // FIRST carousel image
                      className="scroll-img"
                      alt="img"
                    />
                  )}

                  {/* VIDEO */}
                  {item.media_type === "VIDEO" && (
                    <video
                      className="scroll-img"
                      src={item.media_url}
                      autoPlay
                      muted
                      loop
                      playsInline
                    />
                  )}
                </div>
              ))}
            </div>
          </div>
          {/* <button className="view-btn">View All Posts</button> */}
          <button className="view-btn" onClick={() => navigate("/all-posts", { state: { media } })}>
            View All Posts
          </button>


        </div>

        {selectedMedia && (
          <PopupModal selectedMedia={selectedMedia} onClose={() => setSelectedMedia(null)} />
        )}
      </div>
    </>
  );
}

